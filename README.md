# Znakomstva ‚Äî —Å–µ—Ä–≤–∏—Å –∑–Ω–∞–∫–æ–º—Å—Ç–≤ –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞ shared-—Ö–æ—Å—Ç–∏–Ω–≥–µ Beget: –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã, –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ë–î, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `config/config.php`.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Beget)
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–µ—Å—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ –∫–æ—Ä–µ–Ω—å –¥–æ–º–µ–Ω–∞.
2. –°–æ–∑–¥–∞–π—Ç–µ –ë–î MySQL –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `sql/schema.sql`.
3. –û–±–Ω–æ–≤–∏—Ç–µ `config/config.php` (DB_HOST/DB_NAME/DB_USER/DB_PASS).
4. –£–∫–∞–∂–∏—Ç–µ `VAPID_PUBLIC_KEY` –¥–ª—è push.
5. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç ‚Äî –±–∞–∑–æ–≤—ã–π UI —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: `/register`
- –í—Ö–æ–¥: `/login`
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email: `/verify?token=...` (–≤ –¥–µ–º–æ —Å—Å—ã–ª–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)

## –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏
- –†–µ–∞–∫—Ü–∏–∏: `POST /api/react` (like/dislike/super)
- –ß–∞—Ç: `/chat?match_id=...` –∏ `POST /chat/send`

## VIP
- `/vip` ‚Äî —Å—Ç–∞—Ç—É—Å VIP/trial
- `POST /vip/trial` ‚Äî –∑–∞–ø—É—Å–∫ trial –Ω–∞ 24 —á–∞—Å–∞ (–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ push
- `/settings/push` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ —Ç–∏—Ö–∏–º —Ä–µ–∂–∏–º–æ–º.

## –°–æ–±—ã—Ç–∏—è (—Ç—Ä–∏–≥–≥–µ—Ä—ã)
`POST /api/events/emit` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç JSON:
```json
{
  "csrf_token": "...",
  "event": "message.new",
  "payload": {
    "title": "üí¨ –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",
    "body": "–í–∞–º –Ω–∞–ø–∏—Å–∞–ª–∏"
  }
}
```
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è: `like.new`, `match.new`, `message.new`, `super.new`, `match.expiring`, `night.open`, `vip.trial_expiring`, `vip.expiring`.

## –ê–¥–º–∏–Ω–∫–∞
- `/admin/index.php` –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –∞–¥–º–∏–Ω-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–æ–ª—å `admin` –≤—Ä—É—á–Ω—É—é –≤ —Ç–∞–±–ª–∏—Ü–µ `users`.
- Push-—Ü–µ–Ω—Ç—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ cron-–∑–∞–¥–∞—á–µ–π.

## PWA
- `pwa/manifest.json`
- `pwa/service-worker.js`
- Offline-—ç–∫—Ä–∞–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ `/offline`.

## Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–∏–∫–∏:
- `app/services/PushService.php` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å VAPID
- `app/services/EventBus.php` ‚Äî —Ç—Ä–∏–≥–≥–µ—Ä—ã (–ª–∞–π–∫/–º–∞—Ç—á/—Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –¥—Ä.)
- `admin` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ü–µ–Ω—Ç—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

API:
- `POST /api/push/subscribe`
- `POST /api/push/unsubscribe`

## Cron
–î–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–∞—á—É –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç:
```
php /path/to/znakomstva/cron/send_push.php
```
–°–∫—Ä–∏–ø—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏ –∏–∑ `admin_push_jobs`.

## –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
`sql/schema.sql` —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∞–∑–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã. –î–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ phpMyAdmin –∏–ª–∏ SQL.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```
/index.php
/app
  /controllers
  /models
  /services
  /middleware
  /views
/config
/assets
/pwa
/storage
/sql
/admin
/cron
```

## –ö—Ä–æ–Ω –∏ webhook
- –í –±—É–¥—É—â–µ–º: cron –¥–ª—è –∑–∞–¥–∞—á —Ä–∞—Å—Å—ã–ª–æ–∫ –∏ –æ—á–∏—Å—Ç–∫–∏ push-–ø–æ–¥–ø–∏—Å–æ–∫.
- Webhook –ø–ª–∞—Ç–µ–∂–µ–π ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π endpoint –≤ `/app/controllers/PaymentController.php`.

## –ê–¥–º–∏–Ω-–¥–æ—Å—Ç—É–ø
–ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∞ `/admin/index.php`. –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `users`.
